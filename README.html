<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Day One: Building Containers Using Kubernetes and Contrail</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body id="day-one-building-containers" class="article">
<div id="header">
<h1>Day One: Building Containers Using Kubernetes and Contrail</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This Day One book details the long list of Juniper Contrail features that can
enrich Kubernetes implementatons. Startng with the basic concepts of containers
and moving through virtual networks and Contrail architecture, the authors
review the basic foundaton and key components of Kubernetes, including several
diferent Kubernetes features without Contrail integraton. But the core of the
book is devoted to detailed labs and use cases of Contrail and Kubernetes
together. Contrail can build and manage virtual networks that integrate
containers, VMs, and bare metal servers of all types, so the authors focus on
how to integrate a popular pair: Kubernetes and Contrail.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_its_day_one_and_you_have_a_job_to_do_so_learn_about">IT’S DAY ONE AND YOU HAVE A JOB TO DO, SO LEARN ABOUT:</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Container technology and different Kubernetes features using YAML.</p>
</li>
<li>
<p>Kubernetes integration with Contrail.</p>
</li>
<li>
<p>Kubernetes network policy and Contrail firewall security.</p>
</li>
<li>
<p>Configuring isolated Kubernetes Namespaces using Contrail.</p>
</li>
<li>
<p>Configuring Floating IP in Contrail to provide container’s outside connectivity.</p>
</li>
<li>
<p>Configuring load balancer and cluster IP services in Kubernetes using Contrail.</p>
</li>
<li>
<p>Configuring different types of Kubernetes ingress using Contrail.</p>
</li>
<li>
<p>Configuring and building multi-interfaces/multi-network containers using Contrail.</p>
</li>
<li>
<p>Deploying Contrail service chaining using the Juniper cSRX in Kubernetes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_welcome_to_day_one">Welcome to Day One</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This book is part of the <em>Day One</em> library, produced and published by Juniper
Networks Books. <em>Day One</em> books cover the Junos OS and Juniper Networks
networkadministration with straightforward explanations, step-by-step
instructions, and practical examples that are easy to follow.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download a free PDF edition at <a href="http://www.juniper.net/dayone" class="bare">http://www.juniper.net/dayone</a></p>
</li>
<li>
<p>PDF books are available on the Juniper app: <a href="https://www.juniper.net/us/en/training/junos-genius/">Junos Genius</a></p>
</li>
<li>
<p>Purchase the paper edition at Vervante Corporation
(<a href="http://www.vervante.com/">www.vervante.com</a>) for between $15-$40, de- pending
on page length.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="key-juniper-contrail-resources">Key Juniper Contrail Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Juniper TechLibrary has been supporting Contrail with its excellent
documentation for years. The Con- trail selection is thorough, and it’s kept
up-to-date with the latest technologies and GUI changes. This book is no
substitution for that body of information. The authors assume that you have
some familiarity with Juniper Contrail documentation:
<a href="https://www.juniper.net/documentation/product/en_US/contrail-networking/5.0" class="bare">https://www.juniper.net/documentation/product/en_US/contrail-networking/5.0</a></p>
</div>
<div class="paragraph">
<p>The authors keep a GitHub website at
<a href="https://github.com/pinggit/kubernetes-contrail-day-one" class="bare">https://github.com/pinggit/kubernetes-contrail-day-one</a> , where you can find the
book’s content, all the YAML file source code used for the examples, figures,
etc. Add com- ments, suggestions or questions regarding the book, too.”</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-you-need-to-know-before-reading-this-book">What You Need to Know Before Reading This Book</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This book details the long list of Juniper Contrail features that can enrich
Kubernetes implementations. It starts with the basics and builds from there to
cover more complex setups. It’s structured as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Chapter 1:</em> Provides a basic understanding of containers, virtual networks, and Contrail architecture.</p>
</li>
<li>
<p><em>Chapter 2:</em> Lays down the basic foundation and key components of Kubernetes.</p>
</li>
<li>
<p><em>Chapter 3:</em> Explains different Kubernetes features using labs and without any Contrail integration.</p>
</li>
<li>
<p><em>Chapters 4 through 10:</em> These chapters are the core of the book. They begin
by explaining Contrail inte- gration with Kubernetes, then continue on to
cover a number of detailed labs and use cases using Con- trail/Kubernetes.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contrail-command-and-this-book">Contrail Command and This Book</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Contrail Command(CC) is the new user interface (UI) starting with Contrail
5.0.1. Throughout this book we use both the new CC and the old UI to
demonstrate the lab studies. The publication date for this book is November
2019, so depending on when you are reading it, keep in mind that CC will soon
be the only UI; the legacy one is slated to be discontinued at some time.
Detailed information about CC is available from the Juniper documentation
website, so we don’t elaborate on it here. To access CC use this URL in your
web browser: <a href="https://Contrail-Command-Server-IP-Address:9091" class="bare">https://Contrail-Command-Server-IP-Address:9091</a>. The CC server can
be the same as, or different from, the Kubernetes master server or the Contrail
Controller node. In this book, we’ve installed them in same server.  The
functions and settings in CC are grouped in a main menu. This makes a great
entry point where you can navigate through different Contrail functions. To get
the CC main menu, click on the group name right next to the Contrail Command
logo on the upper left corner of the UI</p>
</div>
<div class="paragraph">
<p>Remember, our focus is not on CC but on giving you some basic insights into CC,
which will be helpful to you as you build containers using Kubernetes.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_suggestionscontributingissues">suggestions/contributing/issues</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This book is free and "open source" project! you can find everything about it in this
GitHub repository.</p>
</div>
<div class="paragraph">
<p>If you discover errors or omissions in the source code(yaml file, command line
output, etc), documentation, or anything else, please don’t hesitate to submit
an issue or open a pull request with a fix.</p>
</div>
<div class="paragraph">
<p>If you want to help by improving upon it, you can also fork the project, revise
the content, then send a pull request. When the pull request is merged, the
content will be updated automatically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copyright">copyright</h2>
<div class="sectionbody">
<div class="paragraph">
<p>2019 by Juniper Networks, Inc. All rights reserved.
Juniper Networks and Junos are registered trademarks of
Juniper Networks, Inc. in the United States and other
countries. The Juniper Networks Logo and the Junos logo,
are trademarks of Juniper Networks, Inc. All other
trademarks, service marks, registered trademarks, or
registered service marks are the property of their respective
owners. Juniper Networks assumes no responsibility for
any inaccuracies in this document. Juniper Networks
reserves the right to change, modify, transfer, or otherwise
revise this publication without notice.
Published by Juniper Networks Books</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authors">Authors</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Author: Ping Song, Ayman Aborabh,Yuvaraja Mariappan</p>
</li>
<li>
<p>Editor in Chief: Patrick Ames</p>
</li>
<li>
<p>Copyeditor: Nancy Koerbel</p>
</li>
<li>
<p>Technical Reviewers: Yuvaraja Mariappan, Vincent Zhang</p>
</li>
<li>
<p>ISBN: 978-1-941441-96-1</p>
</li>
<li>
<p>Version History: v1, November. 2019</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_book_progress">book progress</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>(2019-11-13) patrick returns the final edit, the book is DONE!</p>
</li>
<li>
<p>(2019-10-29) Patrick send his edit to Nancy(5th edit)</p>
</li>
<li>
<p>(2019-10-28) submit update (3rd update)</p>
</li>
<li>
<p>(2019-10-28) patrick returns his edit(4th edit)</p>
</li>
<li>
<p>(2019-10-21) submit update to 3rd edit (2nd update)</p>
</li>
<li>
<p>(2019-10-14) Nancy returns her edit (3nd edit)</p>
</li>
<li>
<p>(2019-10-03) patrick sent his edit to our first update to Nancy (2nd edit)</p>
</li>
<li>
<p>(2019-10-01) submitted rewritten network policy chapter 8</p>
</li>
<li>
<p>(2019-09-23) submitted rough version of network policy chapter 8</p>
</li>
<li>
<p>(2019-09-20) submitted update to first edit (first update)</p>
</li>
<li>
<p>(2019-09-07) patrick&#8217;s edit to first draft returns (first edit)</p>
</li>
<li>
<p>(2019-09-04) submitted first draft: chapter 4 (splitted into 6 chapters latter)</p>
</li>
<li>
<p>(2019-08-26) submitted first draft: chapter 1 ~ 3</p>
</li>
<li>
<p>(2019-06-30) main part of the book is done, start updating/extending/reviewing</p>
</li>
<li>
<p>(2019-06-01) yuvaraja starts to co-author formally</p>
</li>
<li>
<p>(2019-05-31) adjusted the book content plan</p>
</li>
<li>
<p>(2019-05-28) tested csrx service chaining feature</p>
</li>
<li>
<p>(2019-05-24) local setup built, tested multi intf pod and csrx</p>
</li>
<li>
<p>(2019-05-05) ch1, ch2 done, starting ch3</p>
</li>
<li>
<p>(2019-04-13) book project started, this repository is built</p>
</li>
<li>
<p>(2019-04-10) ayman starts to co-author</p>
</li>
<li>
<p>(2019-03-15) ping started the idea of this book with patrick</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_latest_toc_as_of_2019_10_21">latest TOC (as of 2019-10-21)</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="content">
<pre>|Chapter 1: Foundation Principles
. |Containers Overview
. . |Understanding Containers
. . |Juniper VSRX vs CSRX
. . |Understanding Docker
. |Contrail overview
. . |Contrail Architecture Fundamentals
. . |Contrail VRouter
|Chapter 2: Kubernetes Basics
. |What is kubernetes
. |Kubernetes Architecture and Components
. . |Kubernetes Master
. . |Kubernetes Node
. . |Kubernetes Work Flow
. . |Kubernetes Objects
. |Kubernetes Pod
. . |YAML file
. . |Pause Container
. . |Intra Pod Communication
. |Kubectl Tool
|Chapter 3: Kubernetes in Practice
. |Labels
. |Namespace
. . |what is Namespace
. . |Create NS
. . |Quota
. |Replication Controller
. . |Create RC
. . |Evaluate RC
. |ReplicaSet
. |Deployment
. . |Create Deployment
. . |Deployment Work Flow
. . |Rolling Update
. . . |evalaute rolling update
. . . |how it works
. . . |record
. . . |pause/resume/undo
. |Secret
. . |Opaque Secret
. . . |define opaque secret
. . . |refer opaque secret
. . |DockerConfigJson secret
. . . |docker credential data
. . . |docker credential file (`~/.docker/config.json`)
. . . |yaml file
. . . |refer `dockerconfigjson` secret in pod: `imagePullSecrets`
. . |Secret Benefits
. |Service
. . |ClusterIP Service
. . . |create clusterIP service
. . . |verify cluserIP service
. . . |specify a clusterIP
. . |NodePort Service
. . |Loadbalancer Service
. . . |`externalIPs`
. . |Kube-Proxy
. |Endpoints
. |Ingress
. . |Ingress vs Service
. . |Ingress Object
. . |Ingress Controller
. . |Ingress Examples
. . . |single service ingress
. . . |simple fanout ingress
. . . |virtual host ingress
. . |Multiple Ingress Controllers
. |contrail Network Policy (ch3)
. . |network policy introduction
. . |network policy definition
. . . |selecting target pods
. . . |policy types
. . . |policy rules
. . . . |network policy rules
. . . . |`AND` vs `OR`
. . . . |protocol and ports
. . . . |line by line explanation
. . |create network policy
. |Liveness Probe and Readiness Probe
. . |Liveness Probe
. . |Readiness Probe
. . |Probe Parameters
. |Annotation
|Chapter 4: Kubernetes and Contrail Integration
. |Contrail-Kubernetes Architecture
. . |Why Contrail with Kubernetes ?
. . |Contrail-Kube-Manager
. . |Kubernetes to Contrail Object Mapping
. |Contrail Lab environment
. . |Contrail Setup
. . |Contrail Command
. |Contrail Namespaces and Isolation
. . |Non-Isolated NS
. . |Isolated NS
. . |Pods Communication across NS
. |Contrail Floating IP
. . |Overlay Internet Access
. . |Floating IP and FIP Pool
. . . |Create FIP Pool
. . . |FIP Pool Scope
. . . . |Object FIP Pool
. . . . |NS FIP Pool
. . . . |Global FIP pool
. . |FIP for Pods
. . |Advertising FIP
. . |summarization
|chapter 5: Contrail Services
. |Kubernetes Service
. |Contrail Service
. . |Contrail Openstack Loadbalancer
. . |Contrail Sevice Loadbalancer
. . |Contrail Loadbalancer Objects
. . . |Loadbalancer
. . . |Listener
. . . |Pool and Member
. |Contrail ClusterIP Service
. . |ClusterIP as FIP
. . |ECMP Routing Table
. . . |Control Node Perspective
. . . |Compute Node Perspective
. . |ClusterIP Service Workflow
. . |Multiple Port Service
. . |Contrail Flow Table
. |Contrail Loadbalancer Service
. . |External IP as FIP
. . |Gateway Router VRF Table
. . |Loadbalancer Service Workflow
. . . |Verify `Loadbalancer` Service
. . . |Loadbalancer Service ECMP
. . . |Verify `Loadbalancer` Service ECMP
|chapter 6: Contrail Ingress
. |Contrail Ingress Loadbalancer
. |Contrail Ingress Workflow
. |Contrail Ingress Traffic Flow
. |Single Service Ingress
. . |`Ingress` Objects Definition
. . . |`Ingress` Definition
. . . |Backend `service` Definition
. . . |Backend `pod` Definition
. . . |An "all in one" Yaml File
. . . |Deploy the Single Service Ingress
. . |`Ingress` Post Examination
. . . |Ingress Object
. . . |Service Objects
. . . |Backend and Client Pod
. . . |Haproxy Processes
. . . |Ingress Loadbalancer Objects
. . . |`haproxy.conf` File
. . . |Gateway Router VRF Table
. . . |`Ingress` Verification: Internal
. . . |`Ingress` Verification: External (Internet host)
. |Simple Fanout Ingress
. . |`Ingress` Objects Definition
. . . |`ingress` Definition
. . . |backend `service` definition
. . . |backend `pod` definition
. . . |deploy `simple fanout Ingress`
. . |`Ingress` post examination
. . . |ingress objects and ingress loadbalancer
. . . |haproxy process and haproxy.cfg file
. . |`Ingress` verification: from internal
. . |`Ingress` verification: from external (Internet host)
. |Virtual Hosting Ingress
. . |`Ingress` objects definition
. . . |`ingress` definition
. . . |an "all in one" yaml file
. . |`Ingress` post examination
. . . |examine ingress objects
. . . |exploring Ingress loadbalancer objects
. . . |examine `haproxy.conf` file
. . |`Ingress` verification: from internal
. . |`Ingress` verification: from external (Internet host)
. |Service vs Ingress Traffic Flow
|chapter 7: Packet Flow in Contrail: End to End View
. |Setup and Utils/Tools
. |Packet Flow Analysis
. . |Internet Host: Analyze HTTP Request
. . |Internet Host to Gateway Router
. . |Gateway router to Ingress Public FIP: MPLS over GRE
. . |Ingress Public FIP to Ingress Pod IP: FIP(NAT)
. . |Ingress Pod IP to Service IP: MPLS over UDP
. . |Service IP to Backend Pod IP: FIP(NAT)
. . |Backend Pod: Analyze HTTP Request
. . |Return Traffic
|chapter 8: Contrail Network Policy
. |introducing Contrail Firewall
. |contrail kubernetes Network Policy usage case
. . |network design
. . |lab preparation
. . |traffic mode before kubernetes network policy creation
. . |create kubernetes network policy
. . |post kubernetes network policy creation
. . . |ingress policy on `webserver-dev`
. . . |egress policy on `webserver-dev` pod
. . . |network policy on `dbserver-dev` pod
. . . |egress policy on `dbserver-dev`
. . . |the drop action in flow table
. |contrail implementation details
. . |construct mappings
. . |Application Policy Set (APS)
. . |policies
. . . |contrail firewall policy naming convention
. . . |the `k8s-allowall` and `k8s-denyall` firewall policy
. . . |sequence number
. . |firewall policy rules
. . . |rules in `k8s-dev-policy1` firewall policy
. . . |rules in `k8s-denyall` firewall policy
. . . |rules in `k8s-allowall` firewall policy
. . |sequence number
. . . |sequence number in firewall policies
. . . |sequence number in firewall policy rules
. . |tag
. . |UI visualization
|chapter 9: Contrail Multiple Interface Pod
. |Contrail as a CNI
. |NetworkAttachmentDefinition CRD
. |Multiple Interface Pod
|chapter 10: Contrail Service Chaining with CSRX
. |Contrail Service Chaining Introduction
. |Bringing Up Client and CSRX Pods
. . |Create VNs
. . |Create Client Pods
. . |Create CSRX Pod
. . |Verify podIP
. . |Ping Test
. . |Troubleshooting Ping Issue
. |Service Chaining
. . |Create Service Chaining
. . |Verify Service Chaining
. . |Security Policy
|appendix
. |contrail kubernetes setup installation
. . |HW/SW prerequisites
. . |3 nodes cluster only setup
. . . |topology
. . . |yaml template
. . |deploy setup based on yaml file
. . |verification</pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-11-14 10:54:29 -0500
</div>
</div>
</body>
</html>